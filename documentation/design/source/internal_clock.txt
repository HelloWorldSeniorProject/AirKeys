// Compiled using https://sequencediagram.org/

title Internal Clock 
participantspacing 5


participant "Internal Clock" as IC
fontawesome f017 Clock
fontawesome f254 "System Observer" as Obs1
fontawesome f254 "Special Observer" as ObsN

[-> IC : init()

IC -->>*Clock : <<create>>

par internal functionality
  loop power off 
  
  IC ->*Obs1 : <<create>> setTimer (inactive limit)
  
  note over Obs1: decrement timer using Runnable
  
  Clock ->> Clock : updateTime()
 	
    alt curr time - last input >= inactive limit
        Obs1-->IC : timer done
        IC ->[ : changeState(inactive)
    else new input detected
    	[--> IC : input detected
        IC -> Obs1 : resetTimer()
    end

  end

thread external commands

	alt getTime
    	[-> IC : getTime()
        IC -> Clock : currentTime()
        Clock --> IC : time 
        IC->[ : time
        
    else createTimer
    	[-> IC : createTimer( time limit)
        IC ->*ObsN : <<create>> setTimer (time limit)
        note over ObsN: decrement timer using Runnable
        opt curr time - create time >= time limit
        	ObsN-->IC : timer done
            destroy ObsN
        end
        
        IC ->[ : timer done
       
    end
end
